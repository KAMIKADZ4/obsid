## От процессора до многопоточки
Процессор - это тот самый физический камень на материнской плате, что вставляется в сокет.

Многопроцессорных системах (параллельны) процессоры находят физически и логически далеко друг от друга. В многоядерных системах св процессоре появились несколько идентичных друг к другу компонентов(ядер) позволяющие исполнять части параллельных программ.
В однопроцессорной многозадачной системе поддерживается так называемое псевдопараллельное исполнение.

В итоге процессор состоят из:
* Ядер
    * Регистры - хранят текущие команды и промежуточные результаты операций
    * Кеши L2 и L1
    * Арифметико-логическое устройство (АЛУ) - выполняет математические и логические операции
    * Управляющее устройство (УУ) - управляет работой процессора с помощью электрических сигналов
* Кеш L3 - память для хранения часто используемых команд и данных из  оперативки для быстроты обращения к ним
* Шины - физические каналы, по котором передается информация между процессором, оперативной памятью и другими устройствами 

Статья о внутреннем устройстве процессора https://skillbox.ru/media/code/chto-takoe-processor-i-kak-on-rabotaet/

В характеристиках процессора всегда помимо числа ядер указывается и число потоков(Kernel Thread). Производители усовершенствовали ядра, добавив доп контроллер и набор регистров для создания второго канала обработки данных. Технологии, позволяющие ядру работать с несколькими потоками, у разных производителей свои: Hyper-Threading у Intel и Simultaneous Multithreading (SMT) у AMD.
## Перейдем уже к ОС
Теперь разберемся, что такое процесс и поток(user thread)

**С точки зрения пользователя:**
Процесс - это выполняемый экземпляр программы.
Поток - ветки кода, выполняющиеся "параллельно", тоесть без предписанного порядка выполнения во времени

**С точки зрения ОС:**
Процесс - абстракция ОС для организации данных для работы программы. У процесса свое адресное пространство, потоки, открытые файлы, дочерние процессы и тд.
Поток - абстракция на уровне ОС, для контроля выполнения кода программы. У потока есть свой стек

Каждый поток, как и каждый процесс, имеет свой контекст. Контекст - это структура, в которой сохраняются следующие элементы: регистры процессора, указатель на стек потока/процесса.

Создание потока дешевле, чем создание нового процесса, тк для процесса требуется создание нового адресного пространства, в то время как поток использует адресное пространство процесса, что его создал. И также переключение между потоками происходит быстрее между процессами

По умолчанию процесс имеет один процесс имеет один поток. Приложение может иметь сотни потоков и при этом не потреблять много ресурсов ядра. 

https://habr.com/ru/sandbox/173396/

Планировщик пользовательских потоков ОС сам распределяют пользовательские потоки по потокам ядра

https://habr.com/ru/articles/40227/

https://habr.com/ru/companies/otus/articles/549814/

## Итог теории
Подведем небольшое теоретические итоги по процессам ядра и пользовательским потокам

| Потоки ядра                                                                                       | Пользовательские потоки                                                                |
| ------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------- |
| Управляются ОС                                                                                    | Управляются пользовательским пространством (создать поток и тп)                        |
| Имеют доступ ко всем ресурсам системы: памяти, устройствам ввода-вывода, аппаратным прерываниям.  | Имеют доступ только к ресурсам своего процесса и работают в его адресном пространстве. |
| Используются для выполнения системных задач (например, управление памятью, обработка прерываний). | Используются для выполнения задач программы, инициируемых пользователем.               |
| Планируются ядром с использованием системного планировщика.                                       | Планируются библиотекой в пользовательском пространстве (например, рантаймом языка).   |
Модели сопоставления пользовательских потоков с потоками ядра

| Модель             | Описание                                                                                                  |
| ------------------ | --------------------------------------------------------------------------------------------------------- |
| One-to-One (1:1)   | Каждый пользовательский поток напрямую связан с потоком ядра. Пример: POSIX Threads в Linux               |
| Many-to-One (M:1)  | Несколько пользовательских потоков сопоставляются с одним потоком ядра. Пример: Старая библиотека GNU Pth |
| Many-to-Many (M:N) | Пользовательские потоки отображаются на несколько потоков ядра. Пример: технология в Solaris.             |
Таблицы созданы с использованием GPT

## Что там с многопочкой на Python